Today we are releasing the next official preview of the `dotnet monitor` tool. This release includes:
- **Require Configuration to Enable Default Process**: Allow configuration of the default process for metrics and for routes where the target process is not specified; if not configured, routes that rely on a default process with return a HTTP 400 status. This is a **breaking change** from prior releases. In prior releases, the default process would resolve only if there was a single observerable process. See the [configuration](https://github.com/dotnet/dotnet-monitor/blob/main/documentation/configuration.md#default-process-configuration) documentation for more details.
- **Default Process in Docker Image**: The Docker image `mcr.microsoft.com/dotnet/monitor` (and nightly image `mcr.microsoft.com/dotnet/nightly/monitor`) have been updated to select the process with ID 1 as the default process; this can potentially break the default process behavior and routes that rely on the default process when running in a multi-container scenario.
- **Select Process By Name**: Allow process selection to consider process names in addition to process IDs and runtime instanc cookies. See the [/dump](https://github.com/dotnet/dotnet-monitor/blob/main/documentation/api/dump.md) route documentation for an example.
- **Ephemeral API Keys**: Enable generation of temporary API key by passing the `--temp-apikey` switch to the `collect` command when starting the `dotnet monitor` tool. This will generate an API key that is valid for the lifetime of the `dotnet monitor` process and write it out to the console. This mode is meant for inner loop development scenarios and is strongly discouraged for use in production scenarios.
- **Timestamps In Logs**: Propagating original event timestamps in the output for the `/logs` routes.
- **Use Application Filters In Logs**: Use the UseAppFilters sentinel for the `/logs` routes and `/trace` routes when the `logs` profile is included when targeting .NET Core 3.1 applications.
- **Custom Logs Collection**: Add `POST` verb to `/logs` route that enables collection of logs from a custom set of log categories and log levels. See the [POST /logs](https://github.com/dotnet/dotnet-monitor/blob/main/documentation/api/logs-custom.md) route documentation for more details.
- **Metrics URL Scheme Not Upgraded**: Remove automatic upgrade of metrics URLs to HTTPS when custom metrics are configured. If HTTPS is desired, pass the `--metircUrls` argument with the URLs that require the HTTPS scheme or configure the metrics URLs in [configuration](https://github.com/dotnet/dotnet-monitor/blob/main/documentation/configuration.md#metrics-configuration).